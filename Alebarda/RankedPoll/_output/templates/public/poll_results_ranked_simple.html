<xf:title>{{ phrase('poll_results') }}: {$poll.question}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$results">
				<!-- Winner Section -->
				<div class="block-row block-row--highlighted">
					<h3 class="block-minorHeader">
						<i class="fa fa-trophy" aria-hidden="true"></i> {{ phrase('winner') }}:
						<strong><xf:foreach loop="$candidateNames" key="$id" value="$name"><xf:if is="$id == $results.winner_id">{$name}</xf:if></xf:foreach></strong>
					</h3>
				</div>

				<hr class="block-separator" />

				<!-- Full Ranking -->
				<div class="block-row">
					<h3 class="block-minorHeader">{{ phrase('final_ranking') }}</h3>
					<ol class="listPlain">
						<xf:foreach loop="$results.ranking" value="$candidateId">
							<li class="block-row">
								<div class="contentRow">
									<div class="contentRow-main">
										<xf:foreach loop="$candidateNames" key="$id" value="$name">
											<xf:if is="$id == $candidateId">{$name}</xf:if>
										</xf:foreach>
									</div>
								</div>
							</li>
						</xf:foreach>
					</ol>
				</div>

				<hr class="block-separator" />

				<!-- Statistics -->
				<div class="block-row">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('total_votes') }}</dt>
						<dd>{$voterCount}</dd>
					</dl>
				</div>

			<xf:else />
				<!-- No votes cast -->
				<div class="block-row">
					<div class="blockMessage blockMessage--none">
						{{ phrase('no_votes_have_been_cast') }}
					</div>
				</div>
			</xf:if>
		</div>

		<!-- Footer with actions -->
		<div class="block-footer">
			<xf:if is="$content">
				<a href="{{ link('threads', $content) }}" class="button">
					{{ phrase('back_to_thread') }}
				</a>
			</xf:if>
		</div>
	</div>
</div>

<xf:css src="poll.less" />
